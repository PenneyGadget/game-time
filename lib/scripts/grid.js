let Grid = function() {
  this.locationsIndex = locationsIndex;
};

Grid.prototype.findLocation = function(clickedX, clickedY) {
  // verifies that user clicked on a live tile
  if(
    (clickedX < (xStartPoints[xStartPoints.length-1]) + 40) &&
    (clickedX > (xStartPoints[0])) &&
    (clickedY < (yStartPoints[yStartPoints.length-1]) + 40) &&
    (clickedY > (yStartPoints[0]))) {
      return getLocation(clickedX, clickedY);
    }
};

let getLocation = function(clickedX, clickedY) {
  // returns tile number of clicked piece
  let closestXOrigin = function() {
    let xRounded = 40 * Math.round(clickedX/40) - 20;
    let originX = xRounded > clickedX ? xRounded - 40 : xRounded;
    return originX;
  };

  let closestYOrigin = function() {
    let yRounded = 40 * Math.round(clickedY/40) - 20;
    let originY = yRounded > clickedY ? yRounded - 40 : yRounded;
    return originY;
  };
  return tileNumber(closestXOrigin(), closestYOrigin());
};

const xStartPoints = [60, 100, 140, 180, 220, 260, 300, 340, 380, 420, 460, 500];
const yStartPoints = [20, 60, 100, 140, 180, 220, 260, 300, 340];

var tileNumber = function(x, y) {
  let tilesByCoordinate = {
    60:  { 20: 57, 60: 69, 100: 73, 140: 77, 180: 81, 220: 85, 260: 89, 300: 93, 340: 97 },
    100: { 20: 58, 60: 70, 100: 74, 140: 78, 180: 82, 220: 86, 260: 90, 300: 94, 340: 98 },
    140: { 20: 59, 60: 31, 100: 39, 140: 41, 180: 43, 220: 45, 260: 47, 300: 49, 340: 99 },
    180: { 20: 60, 60: 32, 100: 13, 140: 19, 180: 21, 220: 23, 260: 25, 300: 50, 340: 100 },
    220: { 20: 61, 60: 33, 100: 14, 140: 3, 180: 7, 220: 9, 260: 26, 300: 51, 340: 101 },
    260: { 20: 62, 60: 34, 100: 15, 140: 4, 180: 1, 220: 10, 260: 27, 300: 52, 340: 102 },
    300: { 20: 63, 60: 35, 100: 16, 140: 5, 180: 2, 220: 11, 260: 28, 300: 53, 340: 103 },
    340: { 20: 64, 60: 36, 100: 17, 140: 6, 180: 8, 220: 12, 260: 29, 300: 54, 340: 104 },
    380: { 20: 65, 60: 37, 100: 18, 140: 20, 180: 22, 220: 24, 260: 30, 300: 55, 340: 105 }
  };
  return tilesByCoordinate[x][y];
};

const locationsIndex = {
  1:   { 'x': 260, 'y': 180 },
  2:   { 'x': 300, 'y': 180 },
  3:   { 'x': 220, 'y': 140 },
  4:   { 'x': 260, 'y': 140 },
  5:   { 'x': 300, 'y': 140 },
  6:   { 'x': 340, 'y': 140 },
  7:   { 'x': 220, 'y': 180 },
  8:   { 'x': 340, 'y': 180 },
  9:   { 'x': 220, 'y': 220 },
  10:  { 'x': 260, 'y': 220 },
  11:  { 'x': 300, 'y': 220 },
  12:  { 'x': 340, 'y': 220 },
  13:  { 'x': 180, 'y': 100 },
  14:  { 'x': 220, 'y': 100 },
  15:  { 'x': 260, 'y': 100 },
  16:  { 'x': 300, 'y': 100 },
  17:  { 'x': 340, 'y': 100 },
  18:  { 'x': 380, 'y': 100 },
  19:  { 'x': 180, 'y': 140 },
  20:  { 'x': 380, 'y': 140 },
  21:  { 'x': 180, 'y': 180 },
  22:  { 'x': 380, 'y': 180 },
  23:  { 'x': 180, 'y': 220 },
  24:  { 'x': 380, 'y': 220 },
  25:  { 'x': 180, 'y': 260 },
  26:  { 'x': 220, 'y': 260 },
  27:  { 'x': 260, 'y': 260 },
  28:  { 'x': 300, 'y': 260 },
  29:  { 'x': 340, 'y': 260 },
  30:  { 'x': 380, 'y': 260 },
  31:  { 'x': 140, 'y': 60 },
  32:  { 'x': 180, 'y': 60 },
  33:  { 'x': 220, 'y': 60 },
  34:  { 'x': 260, 'y': 60 },
  35:  { 'x': 300, 'y': 60 },
  36:  { 'x': 340, 'y': 60 },
  37:  { 'x': 380, 'y': 60 },
  38:  { 'x': 420, 'y': 60 },
  39:  { 'x': 140, 'y': 100 },
  40:  { 'x': 420, 'y': 100 },
  41:  { 'x': 140, 'y': 140 },
  42:  { 'x': 420, 'y': 140 },
  43:  { 'x': 140, 'y': 180 },
  44:  { 'x': 420, 'y': 180 },
  45:  { 'x': 140, 'y': 220 },
  46:  { 'x': 420, 'y': 220 },
  47:  { 'x': 140, 'y': 260 },
  48:  { 'x': 420, 'y': 260 },
  49:  { 'x': 140, 'y': 300 },
  50:  { 'x': 180, 'y': 300 },
  51:  { 'x': 220, 'y': 300 },
  52:  { 'x': 260, 'y': 300 },
  53:  { 'x': 300, 'y': 300 },
  54:  { 'x': 340, 'y': 300 },
  55:  { 'x': 380, 'y': 300 },
  56:  { 'x': 420, 'y': 300 },
  57:  { 'x': 60,  'y': 20 },
  58:  { 'x': 100, 'y': 20 },
  59:  { 'x': 140, 'y': 20 },
  60:  { 'x': 180, 'y': 20 },
  61:  { 'x': 220, 'y': 20 },
  62:  { 'x': 260, 'y': 20 },
  63:  { 'x': 300, 'y': 20 },
  64:  { 'x': 340, 'y': 20 },
  65:  { 'x': 380, 'y': 20 },
  66:  { 'x': 420, 'y': 20 },
  67:  { 'x': 460, 'y': 20 },
  68:  { 'x': 500, 'y': 20 },
  69:  { 'x': 60,  'y': 60 },
  70:  { 'x': 100, 'y': 60 },
  71:  { 'x': 460, 'y': 60 },
  72:  { 'x': 500, 'y': 60 },
  73:  { 'x': 60,  'y': 100 },
  74:  { 'x': 100, 'y': 100 },
  75:  { 'x': 460, 'y': 100 },
  76:  { 'x': 500, 'y': 100 },
  77:  { 'x': 60,  'y': 140 },
  78:  { 'x': 100, 'y': 140 },
  79:  { 'x': 460, 'y': 140 },
  80:  { 'x': 500, 'y': 140 },
  81:  { 'x': 60,  'y': 180 },
  82:  { 'x': 100, 'y': 180 },
  83:  { 'x': 460, 'y': 180 },
  84:  { 'x': 500, 'y': 180 },
  85:  { 'x': 60,  'y': 220 },
  86:  { 'x': 100, 'y': 220 },
  87:  { 'x': 460, 'y': 220 },
  88:  { 'x': 500, 'y': 220 },
  89:  { 'x': 60,  'y': 260 },
  90:  { 'x': 100, 'y': 260 },
  91:  { 'x': 460, 'y': 260 },
  92:  { 'x': 500, 'y': 260 },
  93:  { 'x': 60,  'y': 300 },
  94:  { 'x': 100, 'y': 300 },
  95:  { 'x': 460, 'y': 300 },
  96:  { 'x': 500, 'y': 300 },
  97:  { 'x': 60,  'y': 340 },
  98:  { 'x': 100, 'y': 340 },
  99:  { 'x': 140, 'y': 340 },
  100: { 'x': 180, 'y': 340 },
  101: { 'x': 220, 'y': 340 },
  102: { 'x': 260, 'y': 340 },
  103: { 'x': 300, 'y': 340 },
  104: { 'x': 340, 'y': 340 },
  105: { 'x': 380, 'y': 340 },
  106: { 'x': 420, 'y': 340 },
  107: { 'x': 460, 'y': 340 },
  108: { 'x': 500, 'y': 340 }
};

module.exports = Grid;
